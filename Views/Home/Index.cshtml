<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lord Tekel&Büfe Satış</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- SweetAlert2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">

    <!-- SweetAlert2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        body {
            padding: 20px;
            background-color: #f8f9fa;
            height: 100vh;
            overflow: hidden;
        }

        .container-fluid {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .header {
            background-color: #343a40;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .main-content {
            display: flex;
            flex: 1;
            gap: 20px;
            overflow: hidden;
        }

        .left-panel {
            flex: 3;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .right-panel {
            flex: 2;
            display: flex;
            flex-direction: column;
        }

        .barcode-section {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .product-table-container {
            flex: 1;
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            overflow-y: auto;
        }

        .payment-section {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .quick-products {
            flex: 1;
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            overflow-y: auto;
        }

        .total-section {
            background-color: #28a745;
            color: white;
            padding: 15px;
            border-radius: 5px;
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: 20px;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .btn-action {
            flex: 1;
            padding: 10px;
            font-size: 1.1rem;
        }

        .btn-quick-product {
            width: 120px;
            height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 5px;
            white-space: normal;
        }

        .odeme-btn {
            flex: 1;
        }

            .odeme-btn.active {
                background-color: #007bff;
                color: white;
            }

        #urunListesi {
            width: 100%;
        }

            #urunListesi th {
                position: sticky;
                top: 0;
                background-color: #343a40;
                color: white;
            }

        .payment-methods {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .customer-select {
            margin-bottom: 15px;
        }

        .other-product-section {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="header">
            <h1><i class="fas fa-barcode me-2"></i>Lord Tekel Büfe Satış</h1>
        </div>

        <div class="main-content">
            <div class="left-panel">
                <div class="barcode-section">
                    <div class="input-group mb-3">
                        <span class="input-group-text"><i class="fas fa-barcode"></i></span>
                        <input type="text" id="barkodInput" class="form-control form-control-lg" placeholder="Barkod okutun veya girin" autofocus>
                        <button class="btn btn-primary" onclick="barkodAra()"><i class="fas fa-plus me-2"></i>Ekle</button>
                    </div>
                </div>

                <div class="product-table-container">
                    <table class="table table-striped table-hover" id="urunListesi">
                        <thead>
                            <tr>
                                <th>Ürün Adı</th>
                                <th>Fiyat (₺)</th>
                                <th>Adet</th>
                                <th>Toplam (₺)</th>
                                <th>İşlem</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div class="other-product-section">
                    <h5><i class="fas fa-tag me-2"></i>Diğer Ürün Ekle</h5>
                    <div class="input-group">
                        <span class="input-group-text">Fiyat (₺)</span>
                        <input type="number" id="digerUrunFiyat" class="form-control" placeholder="Fiyat girin" min="0" step="0.01">
                        <button class="btn btn-secondary" onclick="digerUrunEkle()"><i class="fas fa-plus me-2"></i>Ekle</button>
                    </div>
                </div>
            </div>

            <div class="right-panel">
                <div class="total-section">
                    <div id="toplamFiyat" style="font-size: 40px; /* Daha büyük font */ font-weight: bold; /* Kalın yazı */ color: #333;">0.00 ₺</div>
                </div>


                <div class="payment-section">
                    <h5><i class="fas fa-money-bill-wave me-2"></i>Ödeme Seçenekleri</h5>
                    <div class="payment-methods">
                        <button type="button" class="btn btn-success odeme-btn active" data-tip="Nakit">
                            <i class="fas fa-money-bill me-2"></i>Nakit
                        </button>
                        <button type="button" class="btn btn-info odeme-btn" data-tip="Kart">
                            <i class="fas fa-credit-card me-2"></i>Kart
                        </button>
                        <button type="button" class="btn btn-warning odeme-btn" data-tip="Veresiye">
                            <i class="fas fa-hand-holding-usd me-2"></i>Veresiye
                        </button>
                    </div>
                    <input type="hidden" id="odemeTipi" value="Nakit">

                    <div class="customer-select" id="customerSelectContainer" style="display: none;">
                        <label for="musteriSelect" class="form-label"><i class="fas fa-user me-2"></i>Müşteri Seçin:</label>
                        <select id="musteriSelect" class="form-select">
                            <option value="">Müşteri Seçin</option>
                            @foreach (var musteri in Model.Musteriler)
                            {
                                <option value="@musteri.ID">@musteri.MusteriAdSoyad</option>
                            }
                        </select>
                    </div>
                </div>

                <div class="action-buttons d-flex gap-2 flex-wrap mb-3">

                    <button class="btn btn-danger btn-sm" onclick="temizle()">
                        <i class="fas fa-trash-alt me-1"></i> Temizle
                    </button>

                    <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#urunEkleModal">
                        <i class="fas fa-plus me-1"></i> Yeni Ürün
                    </button>

                    <a href="/Admin/Index" class="btn btn-dark btn-sm d-flex align-items-center" title="Admin Ekranı">
                        <i class="fas fa-toolbox me-2"></i>
                    </a>

                    @*<a href="/Urun/Urunler" class="btn btn-warning btn-sm" title="Hızlı Ürün Ekle">
                        <i class="fas fa-bolt me-1"></i>
                    </a>

                    <a class="btn btn-success btn-sm" href="/Urun/Urunler" title="Ürün Güncelle">
                        <i class="fas fa-edit me-1"></i>
                    </a>*@

                   

                </div>


                <div class="quick-products">
                    <h5><i class="fas fa-bolt me-2"></i>Hızlı Ürünler</h5>
                    <div class="d-flex flex-wrap">
                        @foreach (var item in Model.HizliUrunler)
                        {
                            <button class="btn btn-warning btn-quick-product"
                                    onclick="hizliUrunEkle('@item.Barkod')">
                                <div>@item.UrunAd</div>
                                <div class="fw-bold">@item.UrunFiyat ₺</div>
                            </button>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        var toplam = 0;
        var iskontoUygulandi = false;
        var iskontoOrani = 0;
        let digerUrunSayac = 0;

        function temizle() {
            $('#urunListesi tbody').empty();
            toplam = 0;
            $('#toplamFiyat').text("0.00 ₺");
            $('#barkodInput').val('').focus();
            $('#odemeTipi').val('Nakit');
            $('.odeme-btn').removeClass('active');
            $('.odeme-btn[data-tip="Nakit"]').addClass('active');
            $('#musteriSelect').val('');
            $('#customerSelectContainer').hide();
        }

        function updateGenelToplam() {
            let toplamYeni = 0;
            $('#urunListesi tbody tr').each(function () {
                let satirToplam = parseFloat($(this).find('.satirToplam').text());
                toplamYeni += satirToplam;
            });
            toplam = toplamYeni;
            $('#toplamFiyat').text(toplam.toFixed(2) + ' ₺');
        }

        function barkodAra() {
            var barkod = $('#barkodInput').val();
            if (barkod.trim() === "") return;

            let mevcutSatir = $(`#urunListesi tbody tr[data-barkod='${barkod}']`);
            if (mevcutSatir.length > 0) {
                let adetCell = mevcutSatir.find('.adet');
                let yeniAdet = parseInt(adetCell.text()) + 1;
                adetCell.text(yeniAdet);

                let fiyat = parseFloat(mevcutSatir.find('.fiyat').text());
                mevcutSatir.find('.satirToplam').text((yeniAdet * fiyat).toFixed(2));

                updateGenelToplam();
                $('#barkodInput').val("").focus();
                return;
            }

            $.ajax({
                url: '/Home/BarkodAra',
                type: 'POST',
                data: { barkod: barkod },
                success: function (res) {
                    if (res.success) {
                        let toplamSatir = res.fiyat;

                        $('#urunListesi tbody').append(
                            `<tr data-barkod="${barkod}">
                                                <td>${res.urunAd}</td>
                                                <td class="fiyat">${res.fiyat}</td>
                                                <td class="adet">1</td>
                                                <td class="satirToplam">${toplamSatir}</td>
                                                <td>
                                                    <button class="btn btn-sm btn-primary" onclick="adetDegistir(this, 1)"><i class="fas fa-plus"></i></button>
                                                    <button class="btn btn-sm btn-warning" onclick="adetDegistir(this, -1)"><i class="fas fa-minus"></i></button>
                                                    <button class="btn btn-sm btn-danger" onclick="sil(this)"><i class="fas fa-trash"></i></button>
                                                </td>
                                            </tr>`
                        );
                        updateGenelToplam();
                        $('#barkodInput').val("").focus();
                    } else {
                        Swal.fire({
                            title: 'Ürün bulunamadı',
                            icon: 'warning',
                            showCancelButton: true,
                            confirmButtonText: 'Tamam',
                            cancelButtonText: 'Ürün Ekle',
                            reverseButtons: true
                        }).then((result) => {
                            if (result.dismiss === Swal.DismissReason.cancel) {
                                // Ürün Ekle modalını aç
                                var myModal = new bootstrap.Modal(document.getElementById('urunEkleModal'));
                                myModal.show();
                            }
                        });
                        $('#barkodInput').val("").focus();
                    }
                },
                error: function () {
                    Swal.fire({
                        title: 'Bir hata oluştu',
                        text: 'Lütfen tekrar deneyin.',
                        icon: 'error',
                        confirmButtonText: 'Tamam'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            location.reload(); // Sayfayı yenile
                        }
                    });                }
            });
        }

        function adetDegistir(btn, degisim) {
            let satir = $(btn).closest('tr');
            let adetCell = satir.find('.adet');
            let adet = parseInt(adetCell.text());

            adet += degisim;
            if (adet < 1) return;

            adetCell.text(adet);

            let fiyat = parseFloat(satir.find('.fiyat').text());
            satir.find('.satirToplam').text((adet * fiyat).toFixed(2));

            updateGenelToplam();
        }

        function sil(btn) {
            $(btn).closest('tr').remove();
            updateGenelToplam();
        }

        $('#barkodInput').keypress(function (e) {
            if (e.which == 13) {
                barkodAra();
                e.preventDefault();
            }
        });

        function satisYap() {
            let odemeTipi = $('#odemeTipi').val();
            let musteriID = odemeTipi === 'Veresiye' ? $('#musteriSelect').val() : null;

            let urunlerText = '';
            let urunSatirlari = $('#urunListesi tbody tr');

            if (urunSatirlari.length === 0) {
                Swal.fire({
                    title: 'Ürün listesi boş!',
                    text: 'Lütfen önce ürün ekleyin.',
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: 'Tamam',
                    cancelButtonText: 'Ürün Ekle',
                    reverseButtons: true
                }).then((result) => {
                    if (result.dismiss === Swal.DismissReason.cancel) {
                        var modal = new bootstrap.Modal(document.getElementById('urunEkleModal'));
                        modal.show();
                    }
                });
                return;
            }

            if (odemeTipi === 'Veresiye' && (!musteriID || musteriID === "")) {
                Swal.fire({
                    title: 'Uyarı',
                    text: 'Veresiye satış için müşteri seçmelisiniz.',
                    icon: 'info',
                    confirmButtonText: 'Tamam'
                });
                return;
            }

            urunSatirlari.each(function () {
                let urunAd = $(this).find('td:eq(0)').text().trim();
                let adet = $(this).find('.adet').text().trim();
                let fiyat = $(this).find('.fiyat').text().trim();
                urunlerText += `Ürün: ${urunAd} - Adet: ${adet} - Tutar: ${fiyat}\n`;
            });

            $.ajax({
                url: '/Home/SatisYap',
                type: 'POST',
                data: {
                    OdemeTipi: odemeTipi,
                    UrunListesi: urunlerText,
                    MusteriID: musteriID
                },
                success: function (res) {
                    if (res.success) {
                        Swal.fire({
                            icon: 'success',
                            title: 'Satış Tamamlandı!',
                            text: 'Satış işlemi başarıyla gerçekleştirildi.',
                            confirmButtonText: 'Tamam',
                            showCancelButton: true,
                            cancelButtonText: 'Fiş Yazdır',
                            reverseButtons: true
                        }).then((result) => {
                            if (result.isConfirmed) {
                                temizle(); // Satış sonrası temizlik
                            } else if (result.dismiss === Swal.DismissReason.cancel) {
                                fisYazdir();
                                temizle();
                            }
                        });
                    } else {
                        Swal.fire({
                            title: 'Hata',
                            text: 'Hata: ' + res.message, // Bu satır dinamikse JS içinden çağırılmalı
                            icon: 'error',
                            confirmButtonText: 'Tamam'
                        });                    }
                },
                error: function (xhr, status, error) {
                    Swal.fire({
                        title: 'Hata',
                        text: 'Satış işlemi sırasında sistemsel bir hata oluştu.',
                        icon: 'error',
                        confirmButtonText: 'Tamam'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            location.reload();
                        }
                    });
                    console.error("Hata Detayı:", xhr.responseText, status, error);
                }
            });
        }


        function fisYazdir() {
            let fisMetni = "Lord Tekel Büfe Satış Fişi\n\n";

            // Ürünler
            fisMetni += "Ürünler:\n";
            $('#urunListesi tbody tr').each(function () {
                let urunAdi = $(this).find('td:eq(0)').text();
                let fiyat = parseFloat($(this).find('.fiyat').text()).toFixed(2);
                let adet = $(this).find('.adet').text();
                let satirToplam = parseFloat($(this).find('.satirToplam').text()).toFixed(2);

                fisMetni += `${urunAdi} - ${adet} x ${fiyat}₺ = ${satirToplam}₺\n`;
            });

            // Toplam
            let toplam = $('#toplamFiyat').text();
            fisMetni += "\nToplam: " + toplam + "\n";

            // Ödeme Tipi
            let odemeTipi = $('#odemeTipi').val();
            fisMetni += "Ödeme Tipi: " + odemeTipi + "\n";

            // Müşteri bilgisi (seçiliyse)
            let musteriID = $('#musteriSelect').val();
            if (musteriID) {
                let musteriAd = $('#musteriSelect option:selected').text();
                fisMetni += "Müşteri: " + musteriAd + "\n";
            }

            fisMetni += "\nTeşekkürler!";

            // Yazdırma kısmı (örneğin alert veya yeni pencerede gösterme)
            // Sen burayı gerçek yazıcıya gönderme koduyla değiştirebilirsin.
            let yeniPencere = window.open('', '', 'width=300,height=400');
            yeniPencere.document.write('<pre>' + fisMetni + '</pre>');
            yeniPencere.document.close();
            yeniPencere.focus();
            yeniPencere.print();
            yeniPencere.close();
        }




        function hizliUrunEkle(barkod) {
            $('#barkodInput').val(barkod);
            barkodAra();
        }

        function digerUrunEkle() {
            let fiyatInput = $('#digerUrunFiyat');
            let fiyat = parseFloat(fiyatInput.val());

            if (isNaN(fiyat) || fiyat <= 0) {
                Swal.fire({
                    title: 'Geçersiz Fiyat',
                    text: 'Lütfen geçerli bir fiyat girin.',
                    icon: 'warning',
                    confirmButtonText: 'Tamam'
                });
                fiyatInput.value = "";     
                fiyatInput.focus();
                return;
            }

            digerUrunSayac++;
            let barkodDegeri = `digerUrun${digerUrunSayac}`;
            let urunAdi = digerUrunSayac === 1 ? "Diğer Ürün" : `Diğer Ürün ${digerUrunSayac}`;

            $('#urunListesi tbody').append(
                `<tr data-barkod="${barkodDegeri}">
                                    <td>${urunAdi}</td>
                                    <td class="fiyat">${fiyat.toFixed(2)}</td>
                                    <td class="adet">1</td>
                                    <td class="satirToplam">${fiyat.toFixed(2)}</td>
                                    <td>
                                        <button class="btn btn-sm btn-primary" onclick="adetDegistir(this, 1)"><i class="fas fa-plus"></i></button>
                                        <button class="btn btn-sm btn-warning" onclick="adetDegistir(this, -1)"><i class="fas fa-minus"></i></button>
                                        <button class="btn btn-sm btn-danger" onclick="sil(this)"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>`
            );

            updateGenelToplam();
            fiyatInput.val("").focus();
        }

        $('.odeme-btn').click(function () {
            $('.odeme-btn').removeClass('active');
            $(this).addClass('active');

            let secilenTip = $(this).data('tip');
            $('#odemeTipi').val(secilenTip);

            if (secilenTip === 'Veresiye') {
                $('#customerSelectContainer').show();
            } else {
                $('#customerSelectContainer').hide();
                $('#musteriSelect').val('');
            }
        });

        $(document).ready(function () {
            $('#barkodInput').focus();
        });

        $(document).ready(function () {
            $(".odeme-btn").click(function () {
                $(".odeme-btn").removeClass("active");
                $(this).addClass("active");

                var tip = $(this).data("tip");
                $("#odemeTipi").val(tip);

                // Eğer Veresiye ise müşteri seçimini göster
                if (tip === "Veresiye") {
                    $("#customerSelectContainer").slideDown();
                } else {
                    $("#customerSelectContainer").slideUp();
                }

                // Veresiye seçilmişse, müşteri seçilmeden satış yapma
                if (tip === "Veresiye") {
                    if ($("#musteriSelect").val()) {
                        satisYap(); // Müşteri zaten seçiliyse direkt satış yap
                    } else {
                        // Seçim yapılınca satış yapılsın
                        $("#musteriSelect").off("change").on("change", function () {
                            if ($(this).val()) {
                                satisYap();
                            }
                        });
                    }
                } else {
                    satisYap(); // Nakit veya Kart seçildiyse direkt satış yap
                }
            });
        });


        function hizliUrunEkle2() {
            var barkod = $('#barkodInput').val().trim();
            if (!barkod) {
                Swal.fire("Uyarı", "Lütfen bir barkod girin.", "warning");
                return;
            }

            $.ajax({
                url: '/Urun/UrunGetir/' + barkod,
                method: 'GET',
                success: function (data) {
                    if (data) {
                        $.ajax({
                            url: '/Home/HizliUrunYap',
                            method: 'POST',
                            data: { barkod: barkod },
                            success: function (response) {
                                Swal.fire("Başarılı", "Ürün hızlı ürün olarak ayarlandı.", "success");
                            },
                            error: function () {
                                Swal.fire("Hata", "İşlem sırasında hata oluştu.", "error");
                            }
                        });
                    } else {
                        Swal.fire("Bulunamadı", "Bu barkoda ait ürün bulunamadı.", "error");
                    }
                },
                error: function () {
                    Swal.fire("Hata", "Ürün getirilemedi.", "error");
                }
            });
        }

        function urunGuncelle() {
            var barkod = $('#barkodInput').val().trim();
            if (!barkod) {
                Swal.fire("Uyarı", "Lütfen bir barkod girin.", "warning");
                return;
            }

            window.location.href = '/Urun/UrunGetir/' + barkod;
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <div class="modal fade" id="urunEkleModal" tabindex="-1" aria-labelledby="urunEkleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content shadow">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="urunEkleModalLabel">Yeni Ürün Ekle</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Kapat"></button>
                </div>

                <form action="/Home/YeniUrun" method="post" enctype="multipart/form-data">
                    <div class="modal-body">

                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="Barkod" class="form-label">Barkod</label>
                                <input type="text" name="Barkod" class="form-control" required />
                            </div>

                            <div class="col-md-6">
                                <label for="UrunAd" class="form-label">Ürün Adı</label>
                                <input type="text" name="UrunAd" class="form-control" required />
                            </div>

                            <div class="col-md-6">
                                <label for="UrunKategori" class="form-label">Ürün Kategorisi</label>
                                <input type="text" name="UrunKategori" class="form-control" />
                            </div>

                            <div class="col-md-6">
                                <label for="UrunAlisFiyati" class="form-label">Ürün Alış Fiyatı</label>
                                <input type="number" step="0.01" name="UrunAlisFiyati" id="UrunAlisFiyati" class="form-control" />
                            </div>

                            <div class="col-md-6">
                                <label for="KDVOran" class="form-label">KDV Oranı (%)</label>
                                <input type="number" step="0.01" name="KDVOran" id="KDVOran" class="form-control" value="18" />
                            </div>

                            <div class="col-md-6">
                                <label for="UrunFiyat" class="form-label">Hesaplanan Ürün Fiyatı</label>
                                <input type="number" step="0.01" name="UrunFiyat" id="UrunFiyat" class="form-control" required />
                            </div>

                            <div class="col-md-6">
                                <label for="UrunResmi" class="form-label">Ürün Resmi</label>
                                <input type="text" name="UrunResmi" class="form-control" />
                            </div>

                            <div class="col-md-6 mt-4 d-flex align-items-center">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="HizliUrunMu" value="true" id="HizliUrunMu" />
                                    <label class="form-check-label" for="HizliUrunMu">Hızlı Ürün mü?</label>
                                </div>
                                <input type="hidden" name="HizliUrunMu" value="false" />
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-success">Kaydet</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">İptal</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        const alisInput = document.getElementById("UrunAlisFiyati");
        const kdvInput = document.getElementById("KDVOran");
        const fiyatInput = document.getElementById("UrunFiyat");

        function hesaplaFiyat() {
            let alis = parseFloat(alisInput.value) || 0;
            let kdv = parseFloat(kdvInput.value) || 0;
            let hesaplanan = alis + (alis * kdv / 100);
            fiyatInput.value = hesaplanan.toFixed(2);
        }

        alisInput.addEventListener("input", hesaplaFiyat);
        kdvInput.addEventListener("input", hesaplaFiyat);
    </script>
</body>
</html>